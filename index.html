<!DOCTYPE html>
<html lang="en">
 <link rel="stylesheet" href="styles.css" />
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hambana‚ÄØCaf√© Menu</title>

  <!-- ‚ñ∫‚ñ∫ Inline CSS ‚óÑ‚óÑ -->
  <style>
    /* Basic RTL support */
    [dir="rtl"] { text-align: right; direction: rtl; }

    /* Enlarge Arabic and Kurdish fonts */
    html[dir="rtl"] .menu-item .item-name { font-size: 1.3rem; font-weight: 700; }
    html[dir="rtl"] header .appName        { font-size: clamp(1.8rem, 6vw, 2.8rem); font-weight: 800; }
    html[dir="rtl"] header .tagline        { font-size: 2rem; font-weight: 800; }

    header { text-align:center; margin:1rem 0; color:#fff; }
    header > * { margin:0.25rem 0; }

    /* Filter buttons */
    #filterButtons button{
      font-weight:600;border-radius:10px;cursor:pointer;
      padding:0.5rem 1rem;margin:0.2rem;border:1px solid #ffffff;
      background:#e9c44b;transition:background-color 0.3s;
    }
    #filterButtons button.active{background:#bda313;color:#fff;border-color:#a0522d;}

    /* Menu items */
    .menu-item{margin-bottom:0.5rem;display:flex;justify-content:space-between;align-items:center;
               border-bottom:1px solid #eee;padding-bottom:0.3rem;}
    .menu-item .actions{display:flex;gap:0.3rem;}
    .menu-item .actions button{border:none;background:transparent;cursor:pointer;font-size:1rem;}
    .menu-item .editBtn  {color:#4caf50;}
    .menu-item .deleteBtn{color:#f44336;}

    /* Section headings */
    .menu-section h2{border-bottom:2px solid #d2691e;padding-bottom:0.3rem;margin:1rem 0 0.5rem;}

    /* Admin form multilingual inputs */
    #addItemForm input.lang-name{width:calc(100% - 1rem);margin-bottom:0.4rem;padding:0.4rem;font-size:1rem;}

    /* Optional: slightly enlarge all RTL menu sections */
 

    /* Highlight panel while editing */
    #adminPanel.editing{border:2px solid #4caf50;box-shadow:0 0 8px #4caf50;padding:0.5rem;}
  </style>
</head>

<body>
<div class="menu-box">
<header>
  <h1 id="appName" class="appName" style="font-size:70px;"></h1>
  <h3 id="tagline" class="tagline"></h3>

  <select id="langSelect" title="Choose language"></select>
  <button id="adminBtn"  style="display:none;">Admin</button>
  <button id="logoutBtn" style="display:none;">Logout</button>
</header>

<!-- ‚ñ∫ Admin panel right after header so it‚Äôs always near the top ‚óÑ -->
<div id="adminPanel" style="display:none;">
  <h3 id="adminTitle" style="margin:0.5rem 0;">Admin Panel</h3>
  <form id="addItemForm">
    <input type="text"  class="lang-name" id="itemName_en" placeholder="Name (English)"  required />
    <input type="text"  class="lang-name" id="itemName_ar" placeholder="ÿßŸÑÿßÿ≥ŸÖ (Arabic)"  required />
    <input type="text"  class="lang-name" id="itemName_ku" placeholder="ŸÜÿßŸà (Kurdish)"   required />

    <input type="number" id="itemPrice"    placeholder="Price"    required step="0.01" min="0" />
    <select id="itemCategory" required>
      <option value="coffee">Coffee</option>
      <option value="icedcoffee">Iced‚ÄØCoffee</option>
      <option value="tea">Tea</option>
      <option value="freshjuice">Fresh‚ÄØJuice</option>
      <option value="drinks">Drinks</option>
      <option value="snacks">Snacks</option>
      <option value="desserts">Desserts</option>
    </select>

    <button type="submit" id="saveBtn">Add</button>
  </form>
</div>

<div id="filterButtons"></div>
<div id="menuContainer"></div>

<footer style="text-align:center;margin-top:2rem;"><small id="footerName"></small></footer>

<!-- Template for a single menu line -->
<template id="itemTpl">
  <div class="menu-item">
    <div class="item-name"></div>
    <div class="price"></div>
    <div class="actions" style="display:none;">
      <button type="button" class="editBtn"   title="Edit">‚úèÔ∏è</button>
      <button type="button" class="deleteBtn" title="Delete">üóëÔ∏è</button>
    </div>
  </div>
</template>
</div>
<!-- ‚ñ∫‚ñ∫ Inline JavaScript ‚óÑ‚óÑ -->
<script>
(function () {
/* ========= Data & i18n ========= */
const STORAGE_KEY = 'haryadMenu';

const defaultItems = [
  { id: 1,  cat: 'coffee',      names: { en: 'Espresso',     ar: 'ÿ•ÿ≥ÿ®ÿ±Ÿäÿ≥Ÿà',          ku: 'ÿ¶€ïÿ≥Ÿæÿ±€åÿ≥Ÿà' },        price: 2.00 },
  { id: 2,  cat: 'coffee',      names: { en: 'Cappuccino',   ar: 'ŸÉÿßÿ®ÿ™ÿ¥ŸäŸÜŸà',         ku: 'ŸÉÿßŸæŸæŸà⁄Ü€åŸÜŸà' },        price: 3.50 },
  { id: 3,  cat: 'coffee',      names: { en: 'Latte',        ar: 'ŸÑÿßÿ™ŸäŸá',            ku: 'ŸÑÿßÿ™€é' },             price: 3.00 },
  { id: 4,  cat: 'icedcoffee',  names: { en: 'Iced‚ÄØLatte',   ar: 'ŸÑÿßÿ™ŸäŸá ŸÖÿ´ŸÑÿ¨ÿ©',      ku: 'ŸÑÿßÿ™€é€å ÿ≥ÿßÿ±ÿØ' },       price: 3.50 },
  { id: 5,  cat: 'tea',         names: { en: 'Green Tea',    ar: 'ÿ¥ÿßŸä ÿ£ÿÆÿ∂ÿ±',         ku: '⁄Üÿß€å ÿ≥€ïŸàÿ≤' },          price: 1.50 },
  { id: 6,  cat: 'freshjuice',  names: { en: 'Orange Juice', ar: 'ÿπÿµŸäÿ± ÿ®ÿ±ÿ™ŸÇÿßŸÑ',      ku: 'ÿ¥€ïÿ±ÿ®€ïÿ™€å Ÿæ€Üÿ±ÿ™€ïŸÇÿßŸÑ' }, price: 2.50 },
  { id: 7,  cat: 'drinks',      names: { en: 'Sparkling Water',ar:'ŸÖÿßÿ° ŸÅŸàÿßÿ±',        ku: 'ÿ¶ÿßŸà€å ŸÅŸàÿßÿ±' },         price: 1.00 },
  { id: 8,  cat: 'snacks',      names: { en: 'Chicken Sandwich',ar:'ÿ≥ÿßŸÜÿØŸàŸäÿ™ÿ¥ ÿØÿ¨ÿßÿ¨', ku: 'ÿ≥ÿßŸÜÿØŸà€å⁄Ü€å ⁄©€ïÿ®€ï⁄©' },   price: 5.00 },
  { id: 9,  cat: 'snacks',      names: { en: 'Cheese Croissant',ar:'ŸÉÿ±Ÿàÿßÿ≥ŸàŸÜ ÿ¨ÿ®ŸÜÿ©',  ku: '⁄©ÿ±€Üÿ≥ÿßŸÜ€å ŸæŸÜ€åÿ±€å' },     price: 2.50 },
  { id: 10, cat: 'desserts',    names: { en: 'Chocolate Cake', ar:'ŸÉŸäŸÉ ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ©',    ku: '⁄©€å⁄©€å ÿ¥⁄©€ÜŸÑÿßÿ™€ï' },      price: 4.00 },
  { id: 11, cat: 'desserts',    names: { en: 'Baklava',        ar:'ÿ®ŸÇŸÑÿßŸàÿ©',           ku: 'ÿ®ÿßŸÇŸÑ€ïŸàÿß' },           price: 3.00 },
];

const languages = {
  en: {
    appName: 'Hambana', tagline: 'Menu', all: 'All',
    sections:{coffee:'‚òï‚ÄØCoffee', icedcoffee:'üßä‚ÄØIced‚ÄØCoffee', tea:'üçµ‚ÄØTea', freshjuice:'üçπ‚ÄØFresh‚ÄØJuice',
              drinks:'ü•§‚ÄØDrinks', snacks:'ü•™‚ÄØSnacks', desserts:'üç∞‚ÄØDesserts'},
    admin:'Admin', logout:'Logout', adminPanel:'Admin Panel', add:'Add',
    placeholders:{name:'Name', price:'Price', category:'Category'},
    edit:'Edit', save:'Save', cancel:'Cancel'
  },
  ar: {
    appName:'ŸáÿßŸÖÿ®ÿßŸÜ€ï', tagline:'ÿßŸÑŸÇÿßÿ¶ŸÖÿ©', all:'ÿßŸÑŸÉŸÑ',
    sections:{coffee:'‚òï‚ÄØŸÇŸáŸàÿ©', icedcoffee:'üßä‚ÄØŸÇŸáŸàÿ© ŸÖÿ´ŸÑÿ¨ÿ©', tea:'üçµ‚ÄØÿ¥ÿßŸä', freshjuice:'üçπ‚ÄØÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨',
              drinks:'ü•§‚ÄØŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', snacks:'ü•™‚ÄØŸàÿ¨ÿ®ÿßÿ™', desserts:'üç∞‚ÄØÿ≠ŸÑŸàŸäÿßÿ™'},
    admin:'ÿßŸÑŸÖÿ¥ÿ±ŸÅ', logout:'ÿÆÿ±Ÿàÿ¨', adminPanel:'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ', add:'ÿ•ÿ∂ÿßŸÅÿ©',
    placeholders:{name:'ÿßŸÑÿßÿ≥ŸÖ', price:'ÿßŸÑÿ≥ÿπÿ±', category:'ÿßŸÑŸÅÿ¶ÿ©'},
    edit:'ÿ™ÿπÿØŸäŸÑ', save:'ÿ≠ŸÅÿ∏', cancel:'ÿ•ŸÑÿ∫ÿßÿ°'
  },
  ku: {
    appName:'Ÿá€ïŸÖÿ®ÿßŸÜ€ï', tagline:'ŸÑ€åÿ≥ÿ™', all:'Ÿá€ïŸÖŸàŸà',
    sections:{coffee:'‚òï ŸÇÿßŸà€ï', icedcoffee:'üßä ŸÇÿßŸà€ï€å ÿ≥ÿßÿ±ÿØ', tea:'üçµ ⁄Üÿß€å', freshjuice:'üçπÿ¥€ïÿ±ÿ®€ïÿ™€å ŸÅÿ±€éÿ¥',
              drinks:'ü•§ ÿÆŸàÿßÿ±ÿØŸÜ€ïŸà€ï⁄©ÿßŸÜ', snacks:'ü•™ ÿÆŸàÿßÿ±ÿØŸÜ', desserts:'üç∞ ÿ¥€åÿ±€åŸÜ€å'},
    admin:'ÿ®€ï⁄ï€éŸà€ïÿ®€ïÿ±', logout:'⁄ÜŸàŸàŸÜ€ïÿØ€ïÿ±€ïŸà€ï', adminPanel:'Ÿæ€ï⁄ï€ï€å ÿ®€ï⁄ï€éŸà€ïÿ®ÿ±ÿØŸÜ', add:'ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ',
    placeholders:{name:'ŸÜÿßŸà', price:'ŸÜÿ±ÿÆ', category:'Ÿæ€ÜŸÑ'},
    edit:'ÿØ€ïÿ≥ÿ™⁄©ÿßÿ±€å', save:'Ÿá€ï⁄µ⁄Øÿ±ÿ™ŸÜ', cancel:'Ÿá€ï⁄µŸà€ïÿ¥ÿßŸÜÿØŸÜ€ïŸà€ï'
  }
};

let currentLang   = localStorage.getItem('lang') || 'en';
let isAdmin       = false;
let currentFilter = 'all';
let editingId     = null;           // ID of item being edited

/* === DOM shortcuts === */
const langSelect     = document.getElementById('langSelect');
const adminBtn       = document.getElementById('adminBtn');
const logoutBtn      = document.getElementById('logoutBtn');
const menuContainer  = document.getElementById('menuContainer');
const itemTpl        = document.getElementById('itemTpl');
const adminPanel     = document.getElementById('adminPanel');
const addItemForm    = document.getElementById('addItemForm');
const itemPriceIn    = document.getElementById('itemPrice');
const itemCategoryIn = document.getElementById('itemCategory');
const itemNameEnIn   = document.getElementById('itemName_en');
const itemNameArIn   = document.getElementById('itemName_ar');
const itemNameKuIn   = document.getElementById('itemName_ku');

const filterButtons  = document.getElementById('filterButtons');
const appNameEl      = document.getElementById('appName');
const taglineEl      = document.getElementById('tagline');

/* === Helpers === */
const categories = ['all','coffee','icedcoffee','tea','freshjuice','drinks','snacks','desserts'];
const loadItems  = () => JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultItems;
const saveItems  = items => localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
const t          = path => path.split('.').reduce((o,k)=>o&&o[k], languages[currentLang]) || path;
const nextId     = items => items.length ? Math.max(...items.map(i=>i.id)) + 1 : 1;

/* ========= UI RENDERING ========= */
function renderFilterButtons() {
  filterButtons.innerHTML = '';
  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.dataset.cat = cat;
    btn.textContent = cat === 'all' ? t('all') : t(`sections.${cat}`);
    if (cat === currentFilter) btn.classList.add('active');
    filterButtons.appendChild(btn);
  });
}

function renderMenu() {
  menuContainer.innerHTML = '';
  const items = loadItems();
  const cats  = categories.slice(1);
  const show  = currentFilter === 'all' ? cats : [currentFilter];

  show.forEach(cat => {
    const sec = document.createElement('section');
    sec.className = 'menu-section';
    const h2 = document.createElement('h2');
    h2.textContent = t(`sections.${cat}`);
    sec.appendChild(h2);

    items.filter(i => i.cat === cat).forEach(i => {
      const node = itemTpl.content.cloneNode(true);
      const displayName = (i.names && i.names[currentLang]) || (i.names && i.names.en) || 'Unnamed';
      const container = node.querySelector('.menu-item');

      container.querySelector('.item-name').textContent = displayName;
      container.querySelector('.price').textContent = `IQD‚ÄØ${Math.round(i.price)}`;

      /* Toggle action buttons */
      const actions = container.querySelector('.actions');
      if (isAdmin) actions.style.display = 'flex';

      /* DELETE */
      actions.querySelector('.deleteBtn').onclick = () => {
        if (confirm('Delete this item?')) {
          saveItems(loadItems().filter(item => item.id !== i.id));
          renderMenu();
        }
      };

      /* EDIT */
      actions.querySelector('.editBtn').onclick = () => {
        editingId = i.id;
        itemNameEnIn.value  = i.names.en;
        itemNameArIn.value  = i.names.ar;
        itemNameKuIn.value  = i.names.ku;
        itemPriceIn.value   = i.price;
        itemCategoryIn.value = i.cat;

        document.getElementById('saveBtn').textContent = t('save');
        adminPanel.classList.add('editing');
        adminPanel.scrollIntoView({ behavior:'smooth', block:'start' });
      };

      sec.appendChild(container);
    });

    menuContainer.appendChild(sec);
  });
}

function renderUIStrings() {
  appNameEl.textContent = t('appName');
  taglineEl.textContent = t('tagline');
  adminBtn.textContent  = t('admin');
  logoutBtn.textContent = t('logout');
  document.getElementById('adminTitle').textContent = t('adminPanel');
  document.getElementById('saveBtn').textContent = editingId ? t('save') : t('add');
  itemPriceIn.placeholder = t('placeholders.price');
  /* Re‚Äërender category <option>s in current language */
  itemCategoryIn.innerHTML = '';
  ['coffee','icedcoffee','tea','freshjuice','drinks','snacks','desserts'].forEach(c => {
    const o = document.createElement('option');
    o.value = c;
    o.textContent = t(`sections.${c}`);
    itemCategoryIn.appendChild(o);
  });
  document.getElementById('footerName').textContent = t('appName');
}

function updateDirection() {
  const rtl = (currentLang === 'ar' || currentLang === 'ku');
  document.documentElement.dir = rtl ? 'rtl' : 'ltr';
  filterButtons.style.direction = rtl ? 'rtl' : 'ltr';
}

/* ========= ADMIN TOGGLE ========= */
function enableAdmin() {
  isAdmin = true;
  adminPanel.style.display = 'block';
  logoutBtn.style.display = 'inline-block';
  renderMenu();              // show edit/delete icons
}
function disableAdmin() {
  isAdmin = false;
  adminPanel.style.display = 'none';
  logoutBtn.style.display   = 'none';
  editingId = null;
  addItemForm.reset();
  adminPanel.classList.remove('editing');
  document.getElementById('saveBtn').textContent = t('add');
  renderMenu();
}

/* ========= EVENT BINDINGS ========= */
langSelect.onchange = () => {
  currentLang = langSelect.value;
  localStorage.setItem('lang', currentLang);
  renderUIStrings(); renderFilterButtons(); renderMenu(); updateDirection();
};

filterButtons.onclick = e => {
  if (e.target.tagName === 'BUTTON') {
    [...filterButtons.children].forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
    currentFilter = e.target.dataset.cat;
    renderMenu();
  }
};

addItemForm.onsubmit = e => {
  e.preventDefault();
  if (!itemNameEnIn.value.trim() || !itemNameArIn.value.trim() || !itemNameKuIn.value.trim())
    return alert('Please fill all name fields for all languages.');

  const price = parseFloat(itemPriceIn.value);
  if (isNaN(price) || price < 0) return alert(t('placeholders.price') + ' invalid');

  const items = loadItems();

  if (editingId) {
    /* update existing */
    const idx = items.findIndex(item => item.id === editingId);
    if (idx > -1) {
      items[idx] = {
        id: editingId,
        cat: itemCategoryIn.value,
        names:{ en:itemNameEnIn.value.trim(), ar:itemNameArIn.value.trim(), ku:itemNameKuIn.value.trim() },
        price
      };
    }
    editingId = null;
    adminPanel.classList.remove('editing');
    document.getElementById('saveBtn').textContent = t('add');
  } else {
    /* add new */
    items.push({
      id: nextId(items),
      cat: itemCategoryIn.value,
      names:{ en:itemNameEnIn.value.trim(), ar:itemNameArIn.value.trim(), ku:itemNameKuIn.value.trim() },
      price
    });
  }

  saveItems(items);
  addItemForm.reset();
  renderMenu();
};

logoutBtn.onclick = disableAdmin;

/* === Easter‚Äëegg tap / long‚Äëpress / key combo to enter admin mode === */
let tap = 0, timer = null;
appNameEl.onclick = () => {
  tap++; clearTimeout(timer);
  timer = setTimeout(() => tap = 0, 1000);
  if (tap === 5) { if (prompt('Enter admin password:') === 'admin123') enableAdmin(); tap = 0; }
};
let hold = null;
const startHold = () => { hold = setTimeout(()=>{ if (prompt('Enter admin password:')==='admin123') enableAdmin(); },2000); };
const stopHold  = () => clearTimeout(hold);
['mousedown','touchstart'].forEach(ev => taglineEl.addEventListener(ev,startHold));
['mouseup','mouseleave','touchend','touchcancel'].forEach(ev => taglineEl.addEventListener(ev,stopHold));
document.addEventListener('keydown', e=>{
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase()==='a')
    if (prompt('Enter admin password:')==='admin123') enableAdmin();
});

/* ========= INITIAL RENDER ========= */
renderLangOptions();
renderUIStrings();
renderFilterButtons();
renderMenu();
updateDirection();

function renderLangOptions(){
  langSelect.innerHTML='';
  Object.keys(languages).forEach(k=>{
    const o=document.createElement('option');
    o.value=k; o.textContent=k.toUpperCase();
    if (k===currentLang) o.selected=true;
    langSelect.appendChild(o);
  });
}

})();
</script>

</body>
</html>
